# Phantom Engine Lite Mk 1.0
## Master Design and Build Document (MDBD) v1.0.7

-------------------------------------------------------------------------------
## 1.0 Project Overview

1.1 Project Goal  
Design a simpler, guitar reactive, all analog noise synth pedal that:
- Uses a single zener based pink-ish noise source.
- Swells a noise drone under guitar dynamics via an envelope follower.
- Allows a normal passive expression pedal to sweep the noise lowpass filter.
- Provides a final clean plus drone mix.
- Uses only one vactrol for the VCA (fewer than Phantom Engine Mk 4).

1.2 Features (Target)  
- One analog noise source:
  - Single zener breakdown at the 9 V rail.
  - AC coupled, biased to VREF, then amplified and lowpass filtered toward pink.
- Expression controlled noise tone:
  - Standard passive expression pedal (sleeve = ground, ring = DC ref, tip = wiper).
  - Expression pedal sweeps the cutoff of a one pole lowpass in the noise path via a JFET used as a variable resistor.
  - No panel Color knob in Lite; the expression pedal is the tone control.
- Guitar envelope follower driving a single vactrol VCA for swell behavior.
- Active final mixer for clean plus drone with independent level controls.
- Dedicated rail splitter (TLE2426) for a stable VREF (midrail) for audio and control.

1.3 Design Philosophy  
- Keep the architecture as simple as possible while still achieving:
  - Guitar driven swell (no duck).
  - External expression control of tonal brightness.
  - Clean plus drone mix.
- Use IC based solutions where they reduce complexity:
  - TL074 for audio and noise.
  - TL072 for envelope.
  - TLE2426 for VREF.
- Limit “exotic” parts:
  - One vactrol for VCA.
  - One JFET for expression driven tone control.

1.6 Design Targets  

Electrical  
- Supply: 9 V DC, center negative, pedalboard supply.
- Allowed range: 8 V to 12 V DC.
- Maximum current draw: target less than 25 mA.
- Input impedance: about 500 k ohm (1 M to ground in parallel with 1 M to VREF).
- Output impedance: about 100 ohm (series resistor).
- VREF (virtual ground): about one half of the protected 9 V rail.

Performance  
- Envelope:
  - Fast attack from rectifier with gain.
  - Single fixed decay time constant chosen for musical noise swell.
- Noise:
  - Zener breakdown noise, amplified and filtered so that expression sweeps the spectrum from brighter to darker.
- Swell:
  - Drone is quiet or absent at rest.
  - Noise rises in response to playing, perceived as a noise cloud that follows the guitar.
- Expression:
  - Normal passive expression pedal (standard wiring) sweeps the noise tone.
  - No panel Color knob in Lite.

Physical  
- BOM cost target: well under 80 USD in typical quantities.
- Enclosure: 1590B recommended for prototype (125B possible with tight layout).
- One input jack, one output jack, one TRS expression jack.
- Bypass method (true vs buffered) is out of scope for this core circuit.

1.7 Acoustic and Psychoacoustic Targets  
- Spectrum:
  - Zener based noise bed shaped into a pink-ish spectrum by RC filtering under expression control.
- Dynamics:
  - Drone is quiet or absent at rest.
  - Noise rises with envelope when you play.
- Perception:
  - Expression sweep feels like a tone control on a synth noise oscillator.
  - Swell behavior feels natural and guitar driven.

1.8 Form and Finish (Prototype Level)  
- Enclosure: bare aluminum or simple painted box.
- Knobs: 1/4 inch set screw knobs on 16 mm pots (Drone and Clean level).
- Jacks: 1 in, 1 out, 1 TRS expression.
- Indicator: optional power or activity LED (not mandated here).

-------------------------------------------------------------------------------
## 2.0 Design and Theory

2.1 Schematic  
- [Image: PEL_Schematic_v1.0.7.png]

2.2 Functional Block Diagram  
- [Image: PEL_BlockDiagram_v1.0.7.png]

2.3 Functional Block by Block Description (Synced to v1.0.7)

Block 1: Power, Protection, and Reference (IC3)  
- Description:
  - 9 V DC enters at the DC jack.
  - D1 (1N5817) is placed in series with the positive input to form reverse polarity protection.
  - The protected rail (+9V_PROT) is smoothed by C1 (47 uF) and local 100 nF decoupling caps near each IC.
  - IC3 (TLE2426) takes +9V_PROT and generates VREF_RAW at about half the supply.
  - R4 (100 ohm) and C2 (10 uF) create VREF_BUS from VREF_RAW. This isolation and filtering keep VREF quiet under load.
- Signals:
  - +9V_PROT is the main positive supply for all analog ICs.
  - VREF_BUS is the midrail reference used as “0 V” for all audio and control.

Block 2: Guitar Input and Buffer (IC1A)  
- Description:
  - Input jack J1 feeds R1 (1 M) to ground as an input pulldown and part of the input impedance.
  - R2 (1 k) is a small series resistor for ESD and RF protection.
  - D2 and D3 (1N4148) clamp PROT_IN between ground and +9V_PROT to protect the op amp.
  - C3 (1 uF) AC couples PROT_IN into the non inverting input of IC1A.
  - R3 (1 M) biases the input node IN_A_PLUS to VREF_BUS.
  - IC1A (TL074 channel A) is configured as a unity gain non inverting buffer (IN minus tied to OUT).
- Result:
  - CLEAN_SIGNAL is a low impedance, VREF centered version of the guitar input.
  - Input impedance is about 500 k ohm (R1 in parallel with R3).
- Phase:
  - CLEAN_SIGNAL is 0 degrees relative to the AC at the guitar input.

Block 3: Envelope Follower with Gain (IC2A, IC2B, D4, C4, R7)  
- Description:
  - IC2 is a TL072 dual op amp dedicated to the envelope follower.
  - IC2A is a non inverting gain stage around VREF followed by a simple diode rectifier into an envelope storage network.
  - IC2B buffers the envelope node to form ENVELOPE_CV.

  Gain stage (IC2A):
  - IN+ of IC2A is tied directly to CLEAN_SIGNAL.
  - IN- of IC2A is at node ENV_GAIN_NEG.
  - R5 (33 k) from ENV_GAIN_NEG to VREF_BUS.
  - R6 (100 k) from ENV_A_OUT (IC2A OUT) back to ENV_GAIN_NEG.
  - Gain around VREF is about 1 + R6 / R5 (about 4).
  - This boosts the guitar signal before rectification so that even normal playing generates a strong envelope.

  Rectifier and storage:
  - D4 (1N4148) simple diode rectifier:
    - Anode at ENV_A_OUT.
    - Cathode at RECT_NODE.
  - C4 (1 uF) from RECT_NODE to VREF_BUS holds the peak and sets decay together with R7.
  - R7 (220 k) from RECT_NODE to VREF_BUS discharges C4 and sets the decay time constant.
  - IC2B is a unity gain buffer:
    - IN+ at RECT_NODE.
    - IN- tied to OUT.
    - OUT is ENVELOPE_CV.

- Behavior:
  - At idle, RECT_NODE and ENVELOPE_CV sit near VREF_BUS.
  - When the guitar signal is present, IC2A amplifies it, D4 charges C4 above VREF_BUS, and ENVELOPE_CV rises above VREF_BUS.
  - After the transient, ENVELOPE_CV decays back toward VREF_BUS with a time constant set by C4 and R7.
- Polarity:
  - Higher ENVELOPE_CV above VREF_BUS means “play harder”.
  - The added gain ensures that typical guitar levels produce enough envelope swing to drive the VCA.

Block 4: Zener Noise Source and Pre Filter (ZD1, R18, C6, R8, IC1B)  
- Description:
  - A single zener diode at the 9 V rail is used as a broadband noise source.
  - The noise is AC coupled, biased around VREF_BUS, then amplified slightly and gently lowpass filtered before the expression controlled Color stage.

  Zener source:
  - R18 (22 k) from +9V_PROT to ZNODE.
  - ZD1 (about 6.8 V zener) from ZNODE (cathode) to GND (anode).
  - Bias current:
    - About (9 V - 6.8 V) / 22 k, about 0.1 mA.
    - Power in zener is small and safe.

  AC coupling and bias:
  - C6 (100 nF) from ZNODE to NOISE_RAW.
  - R8 (1 M) from NOISE_RAW to VREF_BUS.
  - This blocks DC, passes only noise, and centers the noise on VREF_BUS.

  Gain and gentle HF rolloff (IC1B):
  - IC1B is used as a modest gain stage around VREF.
  - IN+ of IC1B at NOISE_RAW.
  - IN- at node ENV_GAIN_NEG_B.
  - R20 (22 k) from ENV_GAIN_NEG_B to VREF_BUS.
  - R21 (100 k) from NOISE_BUF (IC1B OUT) back to ENV_GAIN_NEG_B.
  - Optional C12 (about 100 pF) in parallel with R21 for gentle HF taming.
  - Gain around VREF is about 1 + R21 / R20 (about 5 to 6).

- Result:
  - NOISE_BUF is a VREF centered, low impedance, boosted noise signal with some high frequency pre shaping.
  - The downstream expression controlled Color filter (Block 5) shapes this further.

Block 5: Expression Controlled Color Filter (JFET J1, C7, J2)  
- Design goal:
  - Accept a normal passive guitar expression pedal (sleeve = ground, ring = DC reference, tip = wiper).
  - Use the expression pedal to sweep the cutoff of a one pole lowpass in the noise path.
  - Do not send audio or VREF out on the cable.

- Expression interface (host side, on the pedal):
  - J2 is a TRS jack.
  - J2 SLEEVE is at GND.
  - J2 RING is driven from VREF_BUS through R_EXP_SRC (1 k).
    - This provides a DC reference of about 4.5 V relative to ground.
    - Shorting ring to sleeve only draws about 4.5 mA through R_EXP_SRC; safe.
  - J2 TIP is EXP_WIPER.
    - EXP_WIPER is a control voltage between 0 V and about VREF_BUS depending on expression pedal position.

- Expression pedal (external, passive):
  - To be compatible, the expression pedal should have:
    - Pot outer lugs between ring and sleeve.
    - Wiper to tip.
  - This is the common passive expression scheme where the host provides a reference on ring and reads the wiper on tip.

- Internal Color filter:
  - C7 (10 nF) from COLOR_NODE to VREF_BUS forms the filter capacitor.
  - J1 is an N channel JFET (for example 2N5457) used as a voltage controlled series resistor between NOISE_BUF and COLOR_NODE.
  - R19 (2.2 k) is a small fixed resistor in series to set a minimum resistance and avoid extreme cutoff.

  Connections:
  - R19 from NOISE_BUF to J1_DRAIN.
  - J1_SOURCE to COLOR_NODE.
  - C7 from COLOR_NODE to VREF_BUS.
  - R_COL_BIAS (1 M) from COLOR_NODE to VREF_BUS to define DC at COLOR_NODE if LDR and volume are very high resistance at idle.
  - R_EXP_IN (100 k) from EXP_WIPER (J2 TIP) to J1_GATE.

- Behavior:
  - DC:
    - NOISE_BUF and COLOR_NODE both sit near VREF_BUS in steady state.
    - J1 sees almost no DC across its source and drain; its conduction is set by gate to source voltage.
  - Control:
    - Gate of J1 sees EXP_CV through R_EXP_IN.
    - Source of J1 sits at about VREF_BUS.
    - When the expression pedal is heel down, EXP_CV near 0 V:
      - Vgs ~ 0 V - VREF_BUS = negative (for example about -4.5 V).
      - J1 is near pinch off and its resistance is high.
      - R_total between NOISE_BUF and COLOR_NODE is large.
      - The RC cutoff is low and the noise is darker.
    - When the expression pedal is toe down, EXP_CV near VREF_BUS:
      - Vgs ~ VREF_BUS - VREF_BUS = about 0 V.
      - J1 conducts strongly; its resistance is low.
      - R_total is near R19 plus the JFET’s low Rds(on).
      - The RC cutoff is high and the noise is brighter.

- Notes:
  - No panel Color knob in Lite; the expression pedal is the sole Color controller.
  - J2 now acts as a standard passive expression input from the outside:
    - Sleeve is ground.
    - Ring is a low current DC reference.
    - Tip is a wiper CV.
  - No audio nodes (NOISE_BUF, VREF_BUS) are exported on the cable.

Block 6: VCA (Series Vactrol U1, Drone Volume, Q1 LED Driver)  
- Description:
  - U1 is a single vactrol (for example VTL5C1 or NSL32).
  - The LDR is used as a series attenuator on the noise path.
  - The LED is driven by NPN transistor Q1 under control of ENVELOPE_CV only.

- LDR path:
  - COLOR_NODE feeds U1_LDR_IN.
  - U1_LDR_OUT goes to DRONE_VOL_TOP.
  - Drone_Vol_Pot (100 k audio) has:
    - Lug 3 (top) at DRONE_VOL_TOP.
    - Lug 1 (bottom) at VREF_BUS.
    - Lug 2 (wiper) is DRONE_SIGNAL.

- LED driver:
  - R16 (1 k) from +9V_PROT to U1_LED_A.
  - U1_LED_K to Q1 collector.
  - Q1 emitter to VREF_BUS.
  - Q1 base driven by the envelope through a resistor network:
    - R9 (33 k) from ENVELOPE_CV to Q1_BASE_NODE.
    - R11 (330 k) from Q1_BASE_NODE to VREF_BUS.

- Behavior:
  - At idle:
    - ENVELOPE_CV is at about VREF_BUS.
    - Through R9 and R11, Q1 base is held near VREF_BUS.
    - Base to emitter voltage is near 0, so Q1 is off. LED is off. U1 LDR is high resistance and the drone is muted.
  - With guitar playing:
    - ENVELOPE_CV rises above VREF_BUS.
    - Through R9, Q1 base rises above VREF_BUS and Q1 turns on.
    - U1 LED sees current from +9V_PROT through R16 and U1_LED into Q1 collector to VREF_BUS.
    - LED current increases, LDR resistance falls, and the noise path opens so the drone swells.

- Note:
  - There is no manual floor control in the Lite version. Drone presence is purely envelope driven.
  - R9 and R11 are good candidates to socket on a prototype board so the swell feel can be tuned by ear.

Block 7: Final Mixer and Output (IC1C, R17)  
- Description:
  - IC1C (TL074 channel C) is an inverting summing amplifier for CLEAN_SIGNAL and DRONE_SIGNAL.
  - Clean side:
    - Clean_Vol_Pot (100 k audio):
      - Lug 3 at CLEAN_SIGNAL.
      - Lug 1 at VREF_BUS.
      - Lug 2 at CLEAN_WIPER.
    - R12 (100 k) from CLEAN_WIPER to IC1C_IN_MINUS node.
  - Drone side:
    - DRONE_SIGNAL from Drone_Vol_Pot wiper to R13 (100 k) to IC1C_IN_MINUS node.
  - Feedback:
    - R14 (100 k) from MIX_OUT_RAW to IC1C_IN_MINUS node.
  - Reference:
    - IC1C IN+ at VREF_BUS.
  - Output:
    - MIX_OUT_RAW from IC1C OUT.
    - R15 (100 ohm) from MIX_OUT_RAW to C8_POS.
    - C8 (1 uF) from C8_POS to J3_TIP.
    - R17 (1 M) from J3_TIP to GND to define the DC reference on the output side of C8 and reduce pops.

- Behavior:
  - Both CLEAN_SIGNAL and DRONE_SIGNAL are VREF centered.
  - The mixer inverts them but maintains their phase relationship.
  - Output impedance is about 100 ohm at audio frequencies.
  - C8 AC couples the mixed audio to the output jack while R17 provides a defined DC reference at J3_TIP.

Block 8: Unused Op Amp Channel Termination (IC1D)  
- Description:
  - IC1D (TL074 channel D) is not used for signal processing in v1.0.7.
  - To avoid noise and oscillation:
    - IN+ is tied to VREF_BUS.
    - IN- is tied to OUT.
  - This forms a unity gain follower at VREF and keeps all inputs at defined potentials.

2.4 Source and Inspiration  
- Phantom Engine Mk 4.0 MDBD (prior, more complex design).  
- Classic zener noise and pink noise shaping ideas from:
  - Anderton, “Electronic Projects for Musicians”.
  - Wilson, “Make: Analog Synthesizers”.
  - Elliott Sound Products.
- Electric Druid documentation is kept as a reference for future IC based noise sources and CV handling, but is not used in v1.0.7.

2.5 Physical Design and Layout Rationale  
- Grounding:
  - Star ground from the DC jack sleeve.
  - VREF_BUS treated as a separate star node fed only from TLE2426 through R4.
- Placement:
  - Power cluster (D1, C1, IC3, R4, C2) near DC jack.
  - TL074 (IC1) near the center so CLEAN_SIGNAL, NOISE_BUF, COLOR_NODE, DRONE_SIGNAL, and MIX_OUT_RAW runs are short.
  - TL072 (IC2) near the input and VREF_BUS region for tight envelope wiring.
  - Zener noise parts (R18, ZD1, C6, R8, IC1B) away from the input jack area.
  - U1 vactrol near the COLOR_NODE and Drone_Vol_Pot area, with LED wiring twisted and routed away from the input.
  - J2 and the J1 gate network located away from the guitar input to minimize coupling.
- Offboard Wiring:
  - Shielded cable for guitar input and output if runs are long.
  - Twisted pairs for vactrol LED leads, DC power pair, and expression wiring.

2.6 Sonic Character and Key Components  
- Character:
  - Zener based noise bed with tone sweep from dark rumble to hiss via the expression controlled lowpass.
  - Swelling drone that rises with envelope while clean guitar can remain present.
- Key components:
  - ZD1 and R18 as the core noise source.
  - TL072 envelope follower shaping swell with added gain.
  - Single vactrol U1 giving musically soft VCA response.
  - TL074 clean buffer, noise preamp, and inverting summing mixer for low noise and predictable gain.
  - J1 JFET providing expression driven Color control.

2.7 Component Sensitivity and Matching  
- Critical components:
  - U1 vactrol: LED to LDR transfer curve and time constants shape swell feel.
  - C4 and R7: envelope decay shape.
  - C7 and J1: define filter cutoff sweep range and feel.
  - R18 and ZD1: noise level and spectral balance.
- Matching:
  - No tight matching required.
  - Use 5 percent or better resistors and film caps for C4 and C7 for predictable timing and tone.

-------------------------------------------------------------------------------
## 3.0 Bill of Materials (BOM)

Note: Prices are rough placeholders.

### 3.1 Resistors

| Ref        | Value    | Type / Description                         | Package  | Key Parameters / Notes           | Suppliers | Price (Approx.) |
|------------|----------|---------------------------------------------|----------|----------------------------------|----------|----------------:|
| R1         | 1 M      | Input pulldown                             | TH axial | 1/4 W, 5 percent                 | Generic  |           0.10 |
| R2         | 1 k      | Input series protection                    | TH axial | 1/4 W                            | Generic  |           0.10 |
| R3         | 1 M      | Input bias to VREF_BUS                     | TH axial | 1/4 W                            | Generic  |           0.10 |
| R4         | 100 ohm  | VREF isolation from TLE2426                | TH axial | 1/4 W                            | Generic  |           0.10 |
| R5         | 33 k     | Envelope gain resistor (IC2A to VREF)      | TH axial | 1/4 W                            | Generic  |           0.10 |
| R6         | 100 k    | Envelope gain feedback resistor (IC2A)     | TH axial | 1/4 W                            | Generic  |           0.10 |
| R7         | 220 k    | Envelope decay resistor (to VREF_BUS)      | TH axial | 1/4 W                            | Generic  |           0.10 |
| R8         | 1 M      | Noise AC node bias to VREF_BUS             | TH axial | 1/4 W                            | Generic  |           0.10 |
| R9         | 33 k     | Envelope to VCA LED driver resistor        | TH axial | 1/4 W                            | Generic  |           0.10 |
| R11        | 330 k    | Q1 base bleed to VREF_BUS                  | TH axial | 1/4 W                            | Generic  |           0.10 |
| R12        | 100 k    | Mixer clean input resistor                 | TH axial | 1/4 W                            | Generic  |           0.10 |
| R13        | 100 k    | Mixer drone input resistor                 | TH axial | 1/4 W                            | Generic  |           0.10 |
| R14        | 100 k    | Mixer feedback resistor                    | TH axial | 1/4 W                            | Generic  |           0.10 |
| R15        | 100 ohm  | Output protection resistor                 | TH axial | 1/4 W                            | Generic  |           0.10 |
| R16        | 1 k      | U1 LED series resistor                     | TH axial | 1/4 W                            | Generic  |           0.10 |
| R17        | 1 M      | Output tip pulldown to ground              | TH axial | 1/4 W                            | Generic  |           0.10 |
| R18        | 22 k     | Zener noise bias resistor (+9V to ZNODE)   | TH axial | 1/4 W                            | Generic  |           0.10 |
| R19        | 2.2 k    | Minimum Color series resistance (NOISE_BUF to J1) | TH axial | 1/4 W                     | Generic  |           0.10 |
| R20        | 22 k     | Noise preamp gain resistor (IC1B to VREF)  | TH axial | 1/4 W                            | Generic  |           0.10 |
| R21        | 100 k    | Noise preamp feedback resistor (IC1B)      | TH axial | 1/4 W                            | Generic  |           0.10 |
| R_EXP_SRC  | 1 k      | Expression reference source (VREF to J2_RING) | TH axial | 1/4 W                        | Generic  |           0.10 |
| R_EXP_IN   | 100 k    | Gate feed from EXP_WIPER to J1 gate        | TH axial | 1/4 W                            | Generic  |           0.10 |
| R_COL_BIAS | 1 M      | Color node DC bias to VREF                 | TH axial | 1/4 W                            | Generic  |           0.10 |

### 3.2 Capacitors

| Ref   | Value   | Type / Description                          | Package    | Key Parameters / Notes             | Suppliers | Price (Approx.) |
|-------|---------|----------------------------------------------|-----------|------------------------------------|----------|----------------:|
| C1    | 47 uF   | Bulk supply reservoir                       | Radial TH | 16 V or higher, low ESR preferred | Generic  |           0.20 |
| C2    | 10 uF   | VREF_BUS filter                             | Radial TH | 16 V or higher                    | Generic  |           0.15 |
| C3    | 1 uF    | Guitar input coupling                       | Film/Elec | 16 V or higher                    | Generic  |           0.20 |
| C4    | 1 uF    | Envelope storage capacitor                  | Film/Elec | Low leakage preferred             | Generic  |           0.30 |
| C6    | 100 nF  | Zener noise AC coupling                     | Film      | 50 V                              | Generic  |           0.15 |
| C7    | 10 nF   | Noise Color lowpass capacitor               | Film      | 5 percent tolerance recommended   | Generic  |           0.15 |
| C8    | 1 uF    | Output coupling capacitor                   | Film/Elec | 16 V or higher                    | Generic  |           0.20 |
| C10A  | 100 nF  | TL074 decoupling                            | Radial TH | X7R, 50 V                         | Generic  |           0.10 |
| C11   | 100 nF  | TL072 decoupling                            | Radial TH | X7R, 50 V                         | Generic  |           0.10 |
| C12   | 100 pF  | Noise preamp HF rolloff (across R21)        | Radial TH | NP0 / C0G, low leakage            | Generic  |           0.10 |

### 3.3 Semiconductors and ICs

| Ref | Value / Type | Description                               | Package | Key Parameters / Notes             | Suppliers     | Price (Approx.) |
|-----|--------------|-------------------------------------------|---------|------------------------------------|--------------|----------------:|
| IC1 | TL074        | Quad JFET op amp (audio and mixer)        | DIP-14  | JFET input, low noise             | TI / ST etc  |           0.75 |
| IC2 | TL072        | Dual JFET op amp (envelope)               | DIP-8   | JFET input, low bias current      | TI / ST etc  |           0.60 |
| IC3 | TLE2426      | Rail splitter                             | TO-92   | Virtual ground, 20 mA class       | TI           |           2.50 |
| D1  | 1N5817       | Series reverse polarity diode             | DO-41   | Schottky, low forward voltage     | Many         |           0.20 |
| D2  | 1N4148       | Input clamp diode (to +9V_PROT)           | DO-35   | Fast small signal diode           | Many         |           0.05 |
| D3  | 1N4148       | Input clamp diode (to ground)             | DO-35   |                                    | Many         |           0.05 |
| D4  | 1N4148       | Envelope rectifier diode                  | DO-35   | Low leakage                       | Many         |           0.05 |
| ZD1 | 6.8 V zener  | Zener noise diode (ZNODE to ground)       | DO-35   | Select for typical breakdown noise| Many         |           0.15 |
| Q1  | 2N5088       | NPN VCA LED driver                        | TO-92   | High beta, low noise              | ON / others  |           0.20 |
| J1  | 2N5457       | N channel JFET (Color series element)     | TO-92   | Used in linear region as VR       | Many         |           0.40 |
| U1  | VTL5C1       | LED / LDR optocoupler (VCA)               | Axial TH| NSL32 alt acceptable              | Excelitas    |           8.00 |

### 3.4 Potentiometers and Hardware

| Ref           | Value   | Type / Description        | Package  | Key Parameters / Alts  | Suppliers | Price (Approx.) |
|---------------|---------|---------------------------|----------|------------------------|----------|----------------:|
| Drone_Vol_Pot | 100 k-A | Drone level               | 16 mm TH | Audio taper            | Alpha    |           1.50 |
| Clean_Vol_Pot | 100 k-A | Clean level               | 16 mm TH | Audio taper            | Alpha    |           1.50 |
| J1            | -       | 1/4 inch mono input jack  | Panel TH | Isolated or grounded   | Neutrik  |           2.00 |
| J3            | -       | 1/4 inch mono output jack | Panel TH |                        | Neutrik  |           2.00 |
| J2            | -       | 1/4 inch TRS expression   | Panel TH | TRS with switching     | Neutrik  |           2.50 |

### 3.5 Other Components

| Ref | Qty | Value  | Type / Description          | Package  | Key Params / Alts      | Suppliers | Price (Each) | Total |
|-----|-----|--------|----------------------------|----------|------------------------|----------|------------:|------:|
| U1  | 1   | VTL5C1 | LED / LDR optocoupler      | Axial TH | NSL32 alt acceptable   | Excelitas|        8.00 |  8.00 |

### 3.6 Mechanical and Enclosure BOM

| Ref  | Qty | Type / Description      | Material | Fabrication    | Suppliers | Price (Each) | Total |
|------|-----|-------------------------|----------|----------------|----------|------------:|------:|
| ENC1 | 1   | 1590B enclosure         | Aluminum | Off the shelf  | Hammond  |       12.00 | 12.00 |
| STN1 | 1   | Standoffs and screws    | Mixed    | Off the shelf  | Generic  |        2.00 |  2.00 |
| KNB1 | 2   | 1/4 inch set screw knob | Plastic  | Off the shelf  | Generic  |        1.00 |  2.00 |

### 3.7 Hardware Identification Guide

- [Image: PEL_Panel_v1.0.7.png]

### 3.8 Estimated Total Cost

- Estimated total: mid 30s to high 40s USD depending on sources and enclosure.
- Prices are estimates only and not real time.

-------------------------------------------------------------------------------
## 4.0 Netlist

4.1 Power, Protection, and Reference

- DC_JACK_POS: from DC jack center pin.
- D1 (1N5817 series RPP): anode = DC_JACK_POS, cathode = +9V_PROT.
- C1 (47 uF): positive = +9V_PROT, negative = GND.
- IC3 (TLE2426):
  - IN (Pin 1) = +9V_PROT.
  - GND (Pin 2) = GND.
  - OUT (Pin 3) = VREF_RAW.
- R4 (100 ohm): one end = VREF_RAW, other end = VREF_BUS.
- C2 (10 uF): positive = VREF_BUS, negative = GND.

4.2 Input and Buffer (IC1A)

- J1 (input jack):
  - TIP = J1_TIP.
  - SLEEVE = GND.
- R1 (1 M): J1_TIP to GND.
- R2 (1 k): J1_TIP to PROT_IN.
- D2 (1N4148): anode = PROT_IN, cathode = +9V_PROT.
- D3 (1N4148): cathode = PROT_IN, anode = GND.
- C3 (1 uF): PROT_IN to IN_A_PLUS.
- R3 (1 M): IN_A_PLUS to VREF_BUS.
- IC1 (TL074):
  - IC1A:
    - IN+ (Pin 3) = IN_A_PLUS.
    - IN- (Pin 2) = OUT_A.
    - OUT (Pin 1) = CLEAN_SIGNAL.
  - Power:
    - V+ (Pin 4) = +9V_PROT.
    - V- (Pin 11) = GND.
  - Decoupling:
    - C10A (100 nF): between +9V_PROT and GND near IC1.

4.3 Envelope Follower with Gain (IC2A, IC2B)

- IC2 (TL072):
  - Power:
    - V+ (Pin 8) = +9V_PROT.
    - V- (Pin 4) = GND.
  - Decoupling:
    - C11 (100 nF): between +9V_PROT and GND near IC2.

IC2A gain stage:
- IC2A IN+ (Pin 3) = CLEAN_SIGNAL.
- ENV_GAIN_NEG node at IC2A IN- (Pin 2).
- R5 (33 k): ENV_GAIN_NEG to VREF_BUS.
- R6 (100 k): IC2A OUT (Pin 1, ENV_A_OUT) to ENV_GAIN_NEG.
- IC2A OUT (Pin 1) = ENV_A_OUT.

Rectifier and envelope storage:
- D4 (1N4148): anode = ENV_A_OUT, cathode = RECT_NODE.
- C4 (1 uF): RECT_NODE to VREF_BUS.
- R7 (220 k): RECT_NODE to VREF_BUS.

IC2B buffer:
- IC2B IN+ (Pin 5) = RECT_NODE.
- IC2B IN- (Pin 6) = ENVELOPE_CV.
- IC2B OUT (Pin 7) = ENVELOPE_CV.

4.4 Zener Noise Source and Pre Filter (ZD1, R18, C6, R8, IC1B)

Zener source:
- R18 (22 k): +9V_PROT to ZNODE.
- ZD1 (6.8 V zener): cathode = ZNODE, anode = GND.

AC coupling and bias:
- C6 (100 nF): ZNODE to NOISE_RAW.
- R8 (1 M): NOISE_RAW to VREF_BUS.

Noise preamp (IC1B):
- IC1B IN+ (Pin 5) = NOISE_RAW.
- ENV_GAIN_NEG_B node at IC1B IN- (Pin 6).
- R20 (22 k): ENV_GAIN_NEG_B to VREF_BUS.
- R21 (100 k): NOISE_BUF (IC1B OUT) to ENV_GAIN_NEG_B.
- C12 (100 pF): between NOISE_BUF and ENV_GAIN_NEG_B.
- IC1B OUT (Pin 7) = NOISE_BUF.

4.5 Expression Controlled Color Filter (J2, J1, C7, R19, R_EXP_SRC, R_EXP_IN, R_COL_BIAS)

Expression jack J2:
- J2_TIP = EXP_WIPER.
- J2_RING = EXP_REF.
- J2_SLEEVE = GND.

Expression reference:
- R_EXP_SRC (1 k): VREF_BUS to EXP_REF (J2_RING).

Expression CV:
- EXP_WIPER from J2_TIP.
- R_EXP_IN (100 k): EXP_WIPER to J1_GATE.

Color filter:
- R19 (2.2 k): NOISE_BUF to J1_DRAIN.
- J1 (2N5457 JFET):
  - DRAIN = J1_DRAIN.
  - SOURCE = COLOR_NODE.
  - GATE = J1_GATE (from R_EXP_IN).
- C7 (10 nF): COLOR_NODE to VREF_BUS.
- R_COL_BIAS (1 M): COLOR_NODE to VREF_BUS.

4.6 VCA (U1 LDR, Drone_Vol_Pot, Q1 LED Driver)

- U1 LDR:
  - LDR end 1 = COLOR_NODE.
  - LDR end 2 = DRONE_VOL_TOP.

- Drone_Vol_Pot (100 k audio):
  - Lug 3 (top) = DRONE_VOL_TOP.
  - Lug 1 (bottom) = VREF_BUS.
  - Lug 2 (wiper) = DRONE_SIGNAL.

- U1 LED:
  - Anode (U1_LED_A) = R16_P2.
  - Cathode (U1_LED_K) = Q1 collector.

- R16 (1 k): one end = +9V_PROT, other end = U1_LED_A.

- Q1 (2N5088):
  - Emitter = VREF_BUS.
  - Collector = U1_LED_K.
  - Base = Q1_BASE_NODE.

- R9 (33 k): ENVELOPE_CV to Q1_BASE_NODE.
- R11 (330 k): Q1_BASE_NODE to VREF_BUS.

4.7 Final Mixer and Output (IC1C, R17)

- Clean_Vol_Pot (100 k audio):
  - Lug 3 (top) = CLEAN_SIGNAL.
  - Lug 1 (bottom) = VREF_BUS.
  - Lug 2 (wiper) = CLEAN_WIPER.
- R12 (100 k): CLEAN_WIPER to MIX_IN_NODE.
- R13 (100 k): DRONE_SIGNAL to MIX_IN_NODE.

- IC1C (TL074 channel C):
  - IN- (Pin 9) = MIX_IN_NODE.
  - IN+ (Pin 10) = VREF_BUS.
  - OUT (Pin 8) = MIX_OUT_RAW.

- R14 (100 k): MIX_OUT_RAW to MIX_IN_NODE.
- R15 (100 ohm): MIX_OUT_RAW to C8_POS.
- C8 (1 uF): C8_POS to J3_TIP.

- J3 (output jack):
  - TIP = J3_TIP.
  - SLEEVE = GND.

- R17 (1 M): J3_TIP to GND.

4.8 Unused Op Amp Channel Termination (IC1D)

- IC1D (TL074 channel D):
  - IN+ (Pin 12) = VREF_BUS.
  - IN- (Pin 13) = OUT_D.
  - OUT (Pin 14) = OUT_D.
- OUT_D is not used elsewhere.

-------------------------------------------------------------------------------
## 5.0 Prototype Build Instructions

5.1 Perfboard or Stripboard Build Guide

5.1.1 Board Preparation  
- Reserve a power corner for:
  - D1, C1, IC3, R4, C2.
- Place IC1 (TL074) at the center so CLEAN_SIGNAL, NOISE_BUF, COLOR_NODE, DRONE_SIGNAL, and MIX_OUT_RAW traces are short.
- Place IC2 (TL072) near the input and VREF_BUS region for short envelope traces.
- Place zener noise parts (R18, ZD1, C6, R8, IC1B) away from the input jack area.
- Place U1 near the COLOR_NODE and Drone_Vol_Pot pads.
- Place J1 (JFET) and the C7 / R_COL_BIAS cluster near NOISE_BUF to keep the Color network compact.

5.1.2 Population Order  
- Install resistors and signal diodes first.
- Install IC sockets and TLE2426.
- Install capacitors and decouplers.
- Install zener ZD1, J1, and vactrol U1.
- Install jacks and pots last, checking fit against the enclosure.

5.1.3 Jumpers and Busses  
- Run a dedicated ground bus.
- Run a separate VREF_BUS trace from R4 and C2, and route it to all op amp IN+ pins and bias resistors.
- Keep high impedance nodes (RECT_NODE, NOISE_RAW, COLOR_NODE) short and away from LED and supply traces.

5.2 Off Board Wiring

- J1 input jack:
  - TIP to J1_TIP pad.
  - SLEEVE to ground star point near DC jack.
- J3 output jack:
  - TIP to J3_TIP pad (R17 pulldown is on board from J3_TIP to ground).
  - SLEEVE to the same ground star.
- J2 TRS expression jack:
  - J2 is assumed to be board mounted; its TIP, RING, and SLEEVE pins go directly to the board nets:
    - TIP to EXP_WIPER net (R_EXP_IN to J1_GATE).
    - RING to EXP_REF net (from R_EXP_SRC and VREF_BUS).
    - SLEEVE to GND.
  - The expression pedal must be a passive unit with:
    - Pot outer lugs between ring (reference) and sleeve (ground).
    - Pot wiper to tip.

Notes:
- J2 now behaves like a normal passive expression interface:
  - The pedal supplies a DC reference (about 4.5 V) on ring relative to ground.
  - The expression pedal returns a wiper voltage between ground and that reference on tip.
- Do not connect active CV sources or audio signals to J2.

- Pots:
  - Drone_Vol_Pot and Clean_Vol_Pot wired per netlist.

- U1 LED:
  - Twist LED wires together and route away from input and noise source.

Usage notes:
- Expression pedal value:
  - Designs based on 10 k to 50 k pots will work; the host only sees the wiper voltage.
- J2 shield (sleeve) is ground, so the expression cable behaves like a standard guitar-style shielded cable.

5.3 Enclosure Assembly

- Drill:
  - One input jack hole.
  - One output jack hole.
  - One TRS expression jack hole.
  - Two pot holes (Drone and Clean).
  - One footswitch hole if bypass switching is included.
- Mount offboard hardware first, then the board on standoffs.
- Keep audio leads short and routed away from the zener noise and power area.

5.4 Notes on Special Components

- ZD1:
  - Orientation: cathode to ZNODE, anode to ground.
  - Different zener part numbers will have different noise levels; you can try a few types if desired.
- TLE2426:
  - Ensure VREF is not heavily loaded beyond intended op amp bias currents and U1 LED current.
- U1:
  - Observe LED polarity.
  - LDR is non polar.
- J1 (JFET):
  - Pinout differs between vendors; check the datasheet and PCB or perf layout carefully.
  - Device-to-device variation will change the exact Color sweep; this is acceptable for a noise effect.
- TL074 and TL072:
  - Sockets recommended for early prototypes.

5.5 3D Printing and Mechanical Fabrication

- Not defined for v1.0.7. Mounting patterns depend on final layout.

-------------------------------------------------------------------------------
## 6.0 Experimentation and Modification Log (Lab Notebook)

6.1 Initial Bring Up and Verification

1. Power and VREF  
- Remove ICs.
- Apply 9 V.
- Confirm D1 is not heating and current draw is minimal.
- Install IC3.
- Measure:
  - +9V_PROT about one diode drop below supply.
  - VREF_BUS about one half of +9V_PROT.

2. Op Amps at Idle  
- Install IC1 and IC2.
- With no input:
  - CLEAN_SIGNAL at IC1A OUT near VREF_BUS.
  - RECT_NODE near VREF_BUS.
  - ENVELOPE_CV near VREF_BUS.
  - NOISE_RAW near VREF_BUS (small AC noise visible on scope).
  - NOISE_BUF near VREF_BUS (larger AC noise due to preamp gain).
  - COLOR_NODE near VREF_BUS.
  - MIX_OUT_RAW near VREF_BUS.
  - J3_TIP (through C8 and R17) should sit near 0 V DC due to the pulldown resistor.

3. Zener Noise Source  
- With ZD1 and R18 installed:
  - Confirm ZNODE DC near zener voltage (around 6 to 7 V).
  - On a scope, observe noise at ZNODE (DC plus broadband noise).
  - At NOISE_RAW (after C6, R8) observe noise centered around VREF_BUS.
  - At NOISE_BUF (IC1B OUT) observe a stronger, slightly HF shaped noise signal.

4. Envelope Response  
- Inject guitar or a 100 mV to 200 mV sine at input.
- Monitor ENV_A_OUT:
  - Should be a VREF centered amplified version of CLEAN_SIGNAL with about four times the amplitude.
- Monitor RECT_NODE:
  - Moves above VREF_BUS when signal is present, falls back via R7 and C4.
- Monitor ENVELOPE_CV:
  - Follows RECT_NODE but buffered and slightly cleaner.

5. VCA Behavior  
- Set Drone_Vol_Pot to mid.
- At idle:
  - U1 LED off or very dim.
  - Little or no noise at output.
- While playing:
  - ENVELOPE_CV rises above VREF_BUS.
  - Q1 base rises via R9, Q1 conducts, U1 LED lights.
  - Noise level increases at the output (swell).
- Vary Drone_Vol_Pot:
  - Controls overall level of the swelled noise.

6. Expression Interface and Color Sweep  
- With no expression pedal plugged in:
  - J2_Ring (EXP_REF) should sit at about VREF_BUS through R_EXP_SRC.
  - J2_Tip (EXP_WIPER) is floating; COLOR_NODE is still defined by R_COL_BIAS and the VCA path.
  - Color will sit at a default cutoff set by J1’s off state (gate floating, but held weakly via R_EXP_IN and J2 TIP leakage).
- Plug in a known passive expression pedal:
  - Verify that ring is at about 4.5 V and sleeve at ground.
  - Check EXP_WIPER range:
    - Heel down: close to 0 V.
    - Toe down: close to 4.5 V.
- Monitor J1 gate:
  - Confirm it tracks EXP_WIPER (within small error).
- Monitor COLOR_NODE noise spectrum on a scope or audio analyzer:
  - Heel down: J1 near pinch off, very large Rds, low cutoff, noise should be darker.
  - Toe down: J1 near low Rds, cutoff high, noise should be brighter.

7. Mixer and Output  
- With Drone_Vol_Pot at minimum, Clean_Vol_Pot at mid:
  - Output should be clean guitar only.
- With Clean_Vol_Pot at minimum, Drone_Vol_Pot at mid:
  - Output should be noise that swells with playing; expression changes its tone.
- With both up:
  - Mixed clean and drone.

Golden Voltages (no input, 9 V in)  
- +9V_PROT: about 8.8 to 9.0 V.  
- VREF_BUS: about 4.4 to 4.5 V.  
- CLEAN_SIGNAL: about VREF_BUS.  
- RECT_NODE: about VREF_BUS.  
- ENVELOPE_CV: about VREF_BUS.  
- NOISE_RAW (DC): about VREF_BUS with small noise.  
- NOISE_BUF (DC): about VREF_BUS with larger noise.  
- COLOR_NODE (DC): about VREF_BUS.  
- MIX_OUT_RAW: about VREF_BUS.  
- J3_TIP: near 0 V DC due to R17.  
- EXP_REF (J2_RING): about VREF_BUS.  
- EXP_WIPER: between 0 V and VREF_BUS depending on expression position.

6.2 Possible Mods

- Envelope time:
  - Increase R7 or C4 for longer decay.
  - Decrease for shorter decay.
- Envelope intensity and VCA feel:
  - R9 and R11 may be socketed:
    - Lower R9 (for example 22 k) for stronger VCA action.
    - Raise R9 (for example 47 k or 68 k) for gentler response.
- Noise level and spectrum:
  - R18 can be lowered to 10 k for more zener current and hotter noise, or raised for quieter noise.
  - ZD1 value can be experimented with; different breakdown voltages and technologies change noise character.
  - C12 can be adjusted between about 47 pF and 220 pF to change high frequency tilt.
- Tone sweep:
  - C7 can be changed to adjust the base cutoff range.
  - R19 can be adjusted to set the minimum brightness at full expression.
- Expression law:
  - R_EXP_IN can be changed (for example 47 k to 220 k) to adjust how strongly the JFET gate follows EXP_WIPER; this mostly affects curve shape and stability rather than basic function.

-------------------------------------------------------------------------------
## 7.0 Design History and Changelog

- v1.0.7 (2025-11-24)  
  - Major design change (expression standardization): redesigned the expression interface to accept a normal passive guitar expression pedal.  
  - J2 now uses standard passive wiring:
    - Sleeve = ground.
    - Ring = DC reference (about VREF_BUS via R_EXP_SRC).
    - Tip = expression wiper (EXP_WIPER).  
  - Expression now produces a 0 to VREF control voltage relative to ground instead of carrying audio or VREF directly.  
  - Color control topology changed:
    - Removed panel Color_Pot from the Lite design.
    - Added J1 (2N5457 JFET) as a voltage controlled series resistor between NOISE_BUF and COLOR_NODE.
    - Added R19 (minimum series resistance), R_EXP_SRC (ring reference resistor), R_EXP_IN (gate feed resistor), and R_COL_BIAS (Color node DC bias).  
    - C7 remains from COLOR_NODE to VREF_BUS.  
  - Expression pedal now sweeps the cutoff of the noise lowpass solely via J1; no audio signals leave the enclosure.  
  - Updated:
    - 1.2 Features (no panel Color knob, expression tone control).
    - 2.3 Block 5 description.
    - 3.0 BOM (added J1, R19, R_EXP_SRC, R_EXP_IN, R_COL_BIAS; removed Color_Pot).
    - 4.5 netlist (new expression and J1 wiring).
    - 5.2 wiring (J2 now standard passive expression).
    - 6.1 bring up (expression tests).  

- v1.0.6 (2025-11-23)  
  - Expression fix (non standard remote Color): previous version treated the expression pedal as a remote audio resistor carrying NOISE_BUF and VREF over the cable. This worked electrically but was non standard and fragile. (Superseded by v1.0.7.)  
  - Corrected BOM / netlist sync for that implementation.  

- v1.0.5 (2025-11-23)  
  - Architectural change: replaced NOISE2 IC based noise source and 5 V regulator with a single zener breakdown noise source at the 9 V rail plus a simple preamp.  
  - Removed IC4 (78L05), IC5 (NOISE2), and associated decoupling capacitors C5, C9, and C10 from BOM and netlist.  
  - Added ZD1 (6.8 V zener), R18 (22 k bias resistor, +9V_PROT to ZNODE), and reused C6 and R8 as the AC coupling and bias network from ZNODE into the noise path.  
  - Reconfigured IC1B as a modest gain stage around VREF with R20 (22 k to VREF_BUS), R21 (100 k feedback), and C12 (about 100 pF) across R21.  
  - Updated Block 4 description (2.3), resistor BOM (3.1), capacitor BOM (3.2), semiconductor BOM (3.3), and netlist section 4.4.  
  - Updated lab bring up section 6.1 to describe zener noise checks instead of NOISE2 checks.  

- v1.0.4 (2025-11-22)  
  - Robustness improvement: added R17 (1 M) from J3_TIP to ground to define the DC reference at the output side of C8 and reduce pops.  
  - Documentation improvement: clarified that J2 was intended for a specific passive expression wiring; this is now superseded by the standard expression interface in v1.0.7.  
  - Updated 2.3, 3.1, 4.7, and 5.2 accordingly.  

- v1.0.3 (2025-11-21)  
  - Functional improvement (envelope headroom): reworked the envelope follower to include gain so that normal guitar playing reliably drives the VCA.  
  - IC2A now operates as a non inverting gain stage around VREF with gain of about 4, followed by a simple diode rectifier into C4 and R7.  
  - R5 repurposed as envelope gain resistor to VREF (33 k).  
  - R6 repurposed as envelope feedback resistor (100 k).  
  - D5 removed from design, BOM, and netlist.  
  - R9 changed from 47 k to 33 k to give a stronger envelope to base coupling for Q1.  

- v1.0.2 (2025-11-20)  
  - Design simplification: removed Manual floor control for effect oriented behavior.  
  - Manual pot and MANUAL_CV node removed from Block 6 description, BOM, and netlist.  
  - Q1 base now driven only from ENVELOPE_CV via R9, with bleed back to VREF via R11.  

- v1.0.1 (2025-11-18)  
  - Fixed envelope follower reference: C4 and R7 now correctly return to VREF_BUS instead of GND in both text and netlist.  
  - Corrected Q1 LED driver reference: Q1 emitter tied to VREF_BUS (not GND) so VBE is 0 at idle and U1 LED is off when ENVELOPE_CV is at VREF.  
  - Cleaned up power decoupling names so that decouplers are clearly associated with IC1 and IC2.  

- v1.0.0 (2025-11-17)  
  - Initial “Phantom Engine Lite” MDBD derived from Phantom Engine Mk 4.  
  - Simplifications:
    - Removed SVF, Q control, LFO, and CV input.  
    - Reduced vactrol count to a single vactrol U1 as VCA.  
    - Introduced a single noise path feeding a Color control and VCA.  
    - Implemented a TL072 based envelope follower and single NPN LED driver.  
    - Implemented a TL074 based clean buffer, noise preamp, and inverting summing mixer.  

-------------------------------------------------------------------------------
## 8.0 Appendix

8.1 Authoritative References

- Anderton, Craig. “Electronic Projects for Musicians.”  
- Wilson, Ray. “Make: Analog Synthesizers.”  
- Brosnac, Donald. “Guitar Electronics for Musicians.”  
- Boscorelli, Nicholas. “The Stomp Box Cookbook.”  
- Pearson, Kirk. “Make: Electronic Music from Scratch.”  
- Elliott, Rod. “Elliott Sound Products - DIY Audio Articles.”  
- Texas Instruments, TL074, TL072, and TLE2426 datasheets.  

Note on D7 Calculations  
- Detailed numeric design calculations (gain, time constants, LED current, zener bias currents, and so on) are maintained in a separate Calculations document per D7. This MDBD references those results qualitatively but does not reproduce the full math.

-------------------------------------------------------------------------------
MDBD Self Check v1.0.7  
- Sections 1.0 through 8.0 are internally consistent.  
- BOM (3.0) and Netlist (4.0) reference the same components and values, with no “magic” parts.  
- Functional descriptions in 2.3 and bring up steps in 6.1 match the current zener based noise source, envelope gain, VCA topology, mixer, output pulldown, and the new standard passive expression interface with JFET Color control.  
- Manual floor control remains fully removed from the design.  
- Expression jack usage is now compatible with normal passive expression pedals (sleeve ground, ring DC reference, tip wiper) and no audio is sent out over the cable.  
- All text is ASCII only and copy and paste friendly.
